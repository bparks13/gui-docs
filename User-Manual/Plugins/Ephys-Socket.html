
<!DOCTYPE html>


<html lang="en" data-theme="light">

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

    <title>Ephys Socket &#8212; Open Ephys GUI Docs</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "light";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "light";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../../_static/styles/theme.css?digest=e353d410970836974a52" rel="stylesheet" />
<link href="../../_static/styles/bootstrap.css?digest=e353d410970836974a52" rel="stylesheet" />
<link href="../../_static/styles/pydata-sphinx-theme.css?digest=e353d410970836974a52" rel="stylesheet" />

  
  <link href="../../_static/vendor/fontawesome/6.1.2/css/all.min.css?digest=e353d410970836974a52" rel="stylesheet" />
  <link rel="preload" as="font" type="font/woff2" crossorigin href="../../_static/vendor/fontawesome/6.1.2/webfonts/fa-solid-900.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../../_static/vendor/fontawesome/6.1.2/webfonts/fa-brands-400.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../../_static/vendor/fontawesome/6.1.2/webfonts/fa-regular-400.woff2" />

    <link rel="stylesheet" type="text/css" href="../../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/tabs.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/theme_overrides.css" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../../_static/scripts/bootstrap.js?digest=e353d410970836974a52" />
<link rel="preload" as="script" href="../../_static/scripts/pydata-sphinx-theme.js?digest=e353d410970836974a52" />

    <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
    <script src="../../_static/doctools.js"></script>
    <script src="../../_static/sphinx_highlight.js"></script>
    <link rel="icon" href="../../_static/favicon.png"/>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Event Broadcaster" href="Event-Broadcaster.html" />
    <link rel="prev" title="Data Snapshot" href="Data-Snapshot.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="light">

  
  
  <a class="skip-link" href="#main-content">Skip to main content</a>
  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__primary"
          id="__primary"/>
  <label class="overlay overlay-primary" for="__primary"></label>
  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__secondary"
          id="__secondary"/>
  <label class="overlay overlay-secondary" for="__secondary"></label>
  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
<form class="bd-search d-flex align-items-center"
      action="../../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder="Search the docs ..."
         aria-label="Search the docs ..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
  </div>
  
    <nav class="bd-header navbar navbar-expand-lg bd-navbar">
<div class="bd-header__inner bd-page-width">
  <label class="sidebar-toggle primary-toggle" for="__primary">
    <span class="fa-solid fa-bars"></span>
  </label>
  
  <div class="navbar-header-items__start">
    
      <div class="navbar-item">
  

<a class="navbar-brand logo" href="../../index.html">
  
  
  
  
    
    
    
    <img src="../../_static/oe_logo_name.svg" class="logo__image only-light" alt="Logo image"/>
    <script>document.write(`<img src="../../_static/oe_logo_name.svg" class="logo__image only-dark" alt="Logo image"/>`);</script>
  
  
</a></div>
    
  </div>
  
  
  <div class="col-lg-9 navbar-header-items">
    
    <div class="me-auto navbar-header-items__center">
      
        <div class="navbar-item"><nav class="navbar-nav">
  <p class="sidebar-header-items__title"
     role="heading"
     aria-level="1"
     aria-label="Site Navigation">
    Site Navigation
  </p>
  <ul class="bd-navbar-elements navbar-nav">
    
                    <li class="nav-item current active">
                      <a class="nav-link nav-internal" href="../index.html">
                        User Manual
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../../Developer-Guide/index.html">
                        Developer Guide
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../../Tutorials/index.html">
                        Tutorials
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../../FAQ/index.html">
                        FAQs
                      </a>
                    </li>
                

                <li class="nav-item">
                  <a class="nav-link nav-external" href="https://open-ephys.org/gui">
                    Download
                  </a>
                </li>
                
  </ul>
</nav></div>
      
    </div>
    
    
    <div class="navbar-header-items__end">
      
        <div class="navbar-item navbar-persistent--container">
          
<script>
document.write(`
  <button class="btn btn-sm navbar-btn search-button search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
  </button>
`);
</script>
        </div>
      
      
        <div class="navbar-item"><ul class="navbar-icon-links navbar-nav"
    aria-label="Icon Links">
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://github.com/open-ephys/plugin-GUI" title="GitHub" class="nav-link" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><span><i class="fab fa-github"></i></span>
            <label class="sr-only">GitHub</label></a>
        </li>
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://twitter.com/openephys" title="Twitter" class="nav-link" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><span><i class="fab fa-twitter"></i></span>
            <label class="sr-only">Twitter</label></a>
        </li>
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://discord.gg/WXAx2URNQU" title="Discord" class="nav-link" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><span><i class="fab fa-discord"></i></span>
            <label class="sr-only">Discord</label></a>
        </li>
</ul></div>
      
    </div>
    
  </div>
  
  
    <div class="navbar-persistent--mobile">
<script>
document.write(`
  <button class="btn btn-sm navbar-btn search-button search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
  </button>
`);
</script>
    </div>
  

  
    <label class="sidebar-toggle secondary-toggle" for="__secondary">
      <span class="fa-solid fa-outdent"></span>
    </label>
  
</div>

    </nav>
  
  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      <div class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
      <div class="sidebar-header-items__center">
        
          <div class="navbar-item"><nav class="navbar-nav">
  <p class="sidebar-header-items__title"
     role="heading"
     aria-level="1"
     aria-label="Site Navigation">
    Site Navigation
  </p>
  <ul class="bd-navbar-elements navbar-nav">
    
                    <li class="nav-item current active">
                      <a class="nav-link nav-internal" href="../index.html">
                        User Manual
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../../Developer-Guide/index.html">
                        Developer Guide
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../../Tutorials/index.html">
                        Tutorials
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../../FAQ/index.html">
                        FAQs
                      </a>
                    </li>
                

                <li class="nav-item">
                  <a class="nav-link nav-external" href="https://open-ephys.org/gui">
                    Download
                  </a>
                </li>
                
  </ul>
</nav></div>
        
      </div>
    
    
    
      <div class="sidebar-header-items__end">
        
          <div class="navbar-item"><ul class="navbar-icon-links navbar-nav"
    aria-label="Icon Links">
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://github.com/open-ephys/plugin-GUI" title="GitHub" class="nav-link" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><span><i class="fab fa-github"></i></span>
            <label class="sr-only">GitHub</label></a>
        </li>
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://twitter.com/openephys" title="Twitter" class="nav-link" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><span><i class="fab fa-twitter"></i></span>
            <label class="sr-only">Twitter</label></a>
        </li>
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://discord.gg/WXAx2URNQU" title="Discord" class="nav-link" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><span><i class="fab fa-discord"></i></span>
            <label class="sr-only">Discord</label></a>
        </li>
</ul></div>
        
      </div>
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item"><nav class="bd-docs-nav bd-links"
     aria-label="Section Navigation">
  <p class="bd-links__title" role="heading" aria-level="1">Section Navigation</p>
  <div class="bd-toc-item navbar-nav"><ul class="current nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../Before-you-begin.html">Before you begin</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Hardware-requirements.html">Hardware requirements</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Installing-the-GUI.html">Installing the GUI</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Exploring-the-user-interface.html">Exploring the user interface</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Building-a-signal-chain.html">Building a signal chain</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../Recording-data/index.html">Recording data</a><input class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-1"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../Recording-data/Binary-format.html">Binary Format</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Recording-data/Open-Ephys-format.html">Open Ephys Format</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Recording-data/NWB-format.html">NWB Format</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../Remote-control.html">Remote control</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Whats-new.html">What’s new in version 0.6.x</a></li>
<li class="toctree-l1 current active has-children"><a class="reference internal" href="index.html">Plugins</a><input checked="" class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-2"><i class="fa-solid fa-chevron-down"></i></label><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="Acq-Board-Output.html">Acq Board Output</a></li>
<li class="toctree-l2"><a class="reference internal" href="Acquisition-Board.html">Acquisition Board</a></li>
<li class="toctree-l2"><a class="reference internal" href="Arduino-Output.html">Arduino Output</a></li>
<li class="toctree-l2"><a class="reference internal" href="Audio-Monitor.html">Audio Monitor</a></li>
<li class="toctree-l2"><a class="reference internal" href="Bandpass-Filter.html">Bandpass Filter</a></li>
<li class="toctree-l2"><a class="reference internal" href="Channel-Map.html">Channel Map</a></li>
<li class="toctree-l2"><a class="reference internal" href="Common-Average-Reference.html">Common Average Reference</a></li>
<li class="toctree-l2"><a class="reference internal" href="CNN-Ripple.html">CNN Ripple</a></li>
<li class="toctree-l2"><a class="reference internal" href="Crossing-Detector.html">Crossing Detector</a></li>
<li class="toctree-l2"><a class="reference internal" href="Data-Snapshot.html">Data Snapshot</a></li>
<li class="toctree-l2 current active"><a class="current reference internal" href="#">Ephys Socket</a></li>
<li class="toctree-l2"><a class="reference internal" href="Event-Broadcaster.html">Event Broadcaster</a></li>
<li class="toctree-l2"><a class="reference internal" href="Event-Translator.html">Event Translator</a></li>
<li class="toctree-l2"><a class="reference internal" href="Falcon-Output.html">Falcon Output</a></li>
<li class="toctree-l2"><a class="reference internal" href="File-Reader.html">File Reader</a></li>
<li class="toctree-l2"><a class="reference internal" href="Intan-RHD-USB.html">Intan RHD USB</a></li>
<li class="toctree-l2"><a class="reference internal" href="Latency-Histogram.html">Latency Histogram</a></li>
<li class="toctree-l2"><a class="reference internal" href="LFP-Viewer.html">LFP Viewer</a></li>
<li class="toctree-l2"><a class="reference internal" href="LSL-Inlet.html">LSL Inlet</a></li>
<li class="toctree-l2"><a class="reference internal" href="MATLAB-Interface.html">MATLAB Interface</a></li>
<li class="toctree-l2"><a class="reference internal" href="Mean-Spike-Rate.html">Mean Spike Rate</a></li>
<li class="toctree-l2"><a class="reference internal" href="Merger.html">Merger</a></li>
<li class="toctree-l2"><a class="reference internal" href="Multiband-Integrator.html">Multi-Band Integrator</a></li>
<li class="toctree-l2"><a class="reference internal" href="Network-Events.html">Network Events</a></li>
<li class="toctree-l2"><a class="reference internal" href="Neuropixels-CAR.html">Neuropixels CAR</a></li>
<li class="toctree-l2"><a class="reference internal" href="Neuropixels-PXI.html">Neuropixels PXI</a></li>
<li class="toctree-l2"><a class="reference internal" href="NIDAQmx.html">NI-DAQmx</a></li>
<li class="toctree-l2"><a class="reference internal" href="OE-FPGA-Acquisition-Board.html">OE FPGA Acquisition Board</a></li>
<li class="toctree-l2"><a class="reference internal" href="Online-PSTH.html">Online PSTH</a></li>
<li class="toctree-l2"><a class="reference internal" href="OSC-Events.html">OSC Events</a></li>
<li class="toctree-l2"><a class="reference internal" href="Phase-Calculator.html">Phase Calculator</a></li>
<li class="toctree-l2"><a class="reference internal" href="Phase-Detector.html">Phase Detector</a></li>
<li class="toctree-l2"><a class="reference internal" href="Probe-Viewer.html">Probe Viewer</a></li>
<li class="toctree-l2"><a class="reference internal" href="Pulse-Pal.html">Pulse Pal</a></li>
<li class="toctree-l2"><a class="reference internal" href="Python-Processor.html">Python Processor</a></li>
<li class="toctree-l2"><a class="reference internal" href="Rec-Controller-Output.html">Rec Controller Output</a></li>
<li class="toctree-l2"><a class="reference internal" href="Record-Control.html">Record Control</a></li>
<li class="toctree-l2"><a class="reference internal" href="Record-Node.html">Record Node</a></li>
<li class="toctree-l2"><a class="reference internal" href="RHD-Rec-Controller.html">RHD Rec Controller</a></li>
<li class="toctree-l2"><a class="reference internal" href="Ripple-Detector.html">Ripple Detector</a></li>
<li class="toctree-l2"><a class="reference internal" href="River-Output.html">River Output</a></li>
<li class="toctree-l2"><a class="reference internal" href="Spectrum-Viewer.html">Spectrum Viewer</a></li>
<li class="toctree-l2"><a class="reference internal" href="Spike-Detector.html">Spike Detector</a></li>
<li class="toctree-l2"><a class="reference internal" href="Spike-Sorter.html">Spike Sorter</a></li>
<li class="toctree-l2"><a class="reference internal" href="Spike-Viewer.html">Spike Viewer</a></li>
<li class="toctree-l2"><a class="reference internal" href="Splitter.html">Splitter</a></li>
<li class="toctree-l2"><a class="reference internal" href="Tracking-Plugin.html">Tracking Plugin</a></li>
<li class="toctree-l2"><a class="reference internal" href="TTL-Panels.html">TTL Panels</a></li>
<li class="toctree-l2"><a class="reference internal" href="Virtual-Reference.html">Virtual Reference</a></li>
<li class="toctree-l2"><a class="reference internal" href="XDAQ-OE.html">XDAQ</a></li>
<li class="toctree-l2"><a class="reference internal" href="ZMQ-Interface.html">ZMQ Interface</a></li>
</ul>
</li>
</ul>
</div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main">
        
        
          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item">



<nav aria-label="Breadcrumbs">
  <ul class="bd-breadcrumbs" role="navigation" aria-label="Breadcrumb">
    
    <li class="breadcrumb-item breadcrumb-home">
      <a href="../../index.html" class="nav-link" aria-label="Home">
        <i class="fa-solid fa-home"></i>
      </a>
    </li>
    
    <li class="breadcrumb-item"><a href="../index.html" class="nav-link">User Manual</a></li>
    
    
    <li class="breadcrumb-item"><a href="index.html" class="nav-link">Plugins</a></li>
    
    <li class="breadcrumb-item active" aria-current="page">Ephys Socket</li>
  </ul>
</nav>
</div>
      
    </div>
  
  
</div>
</div>
              
              
              
                
<div id="searchbox"></div>
                <article class="bd-article" role="main">
                  
  <section id="ephys-socket">
<span id="ephyssocket"></span><h1>Ephys Socket<a class="headerlink" href="#ephys-socket" title="Permalink to this heading">#</a></h1>
<img alt="Annotated Ephys Socket Editor" src="../../_images/ephyssocket-01.png" />
<table class="table" id="id1">
<caption><span class="caption-text">Receives formatted data from a TCP socket that implements a particular <a class="reference internal" href="#header-format-for-custom-data-streams"><span class="std std-ref">header format</span></a>. A common use case is to receive data streamed from <a class="reference internal" href="#in-bonsai"><span class="std std-ref">Bonsai</span></a>. This is intended to be a quick way to stream ephys data from a third-party application and visualize in the Open Ephys GUI. Below is a way to setup streaming between Bonsai and the Open Ephys GUI, which can be extended to other software and/or hardware that carry the same header format.</span><a class="headerlink" href="#id1" title="Permalink to this table">#</a></caption>
<colgroup>
<col style="width: 18%" />
<col style="width: 82%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p><em>Plugin Type</em></p></td>
<td><p>Source</p></td>
</tr>
<tr class="row-even"><td><p><em>Platforms</em></p></td>
<td><p>Windows, Linux, macOS</p></td>
</tr>
<tr class="row-odd"><td><p><em>Built in?</em></p></td>
<td><p>No</p></td>
</tr>
<tr class="row-even"><td><p><em>Key Developers</em></p></td>
<td><p>Jon Newman, Brandon Parks</p></td>
</tr>
<tr class="row-odd"><td><p><em>Source Code</em></p></td>
<td><p><a class="github reference external" href="https://github.com/open-ephys-plugins/ephys-socket">open-ephys-plugins/ephys-socket</a></p></td>
</tr>
</tbody>
</table>
<section id="installing-and-upgrading">
<h2>Installing and upgrading<a class="headerlink" href="#installing-and-upgrading" title="Permalink to this heading">#</a></h2>
<p>The Ephys Socket plugin is not included by default in the Open Ephys GUI. To install, use <strong>ctrl-P</strong> or <strong>⌘P</strong> to access the Plugin Installer, browse to the “Ephys Socket” plugin, and click the “Install” button.</p>
<p>The Plugin Installer also allows you to upgrade to the latest version of this plugin, if it’s already installed.</p>
</section>
<section id="plugin-configuration">
<h2>Plugin Configuration<a class="headerlink" href="#plugin-configuration" title="Permalink to this heading">#</a></h2>
<section id="in-bonsai">
<h3>In Bonsai<a class="headerlink" href="#in-bonsai" title="Permalink to this heading">#</a></h3>
<ol class="arabic simple">
<li><p>Make sure you have the <strong>Bonsai.Ephys</strong> and <strong>OpenEphys.Sockets.Bonsai</strong> packages installed. For the latter, you’ll have to set the package source to “Community Packages”.</p></li>
<li><p>Create a signal chain that includes (at least):</p>
<ul class="simple">
<li><p>A source that generates an <cite>OpenCV.Net.Mat</cite> output (e.g., <code class="code docutils literal notranslate"><span class="pre">Rhd2000EvalBoard</span></code>, which is compatible with the Open Ephys acquisition board)</p></li>
<li><p>A member selector that isolates the <cite>OpenCV.Net.Mat</cite> output</p></li>
<li><p>The <code class="code docutils literal notranslate"><span class="pre">TcpServer</span></code> and <code class="code docutils literal notranslate"><span class="pre">SendMatOverSocket</span></code> nodes from <strong>OpenEphys.Sockets.Bonsai</strong>.</p></li>
</ul>
</li>
<li><p>Click on the <code class="code docutils literal notranslate"><span class="pre">TcpServer</span></code>, and edit the fields there:</p>
<ul class="simple">
<li><p>Set the address (for communication within the same computer, put “localhost” without quotes)</p></li>
<li><p>Add a name to use for the connection channel. This can be an arbitrary name, but must match the same name used in the <code class="code docutils literal notranslate"><span class="pre">SendMatOverSocket</span></code> node</p></li>
<li><p>Change the port number to <code class="code docutils literal notranslate"><span class="pre">9001</span></code></p></li>
</ul>
</li>
<li><p>(Optional) Add a “Select Channels” operator before <code class="code docutils literal notranslate"><span class="pre">SendMatOverSocket</span></code>, to select a subset of channels for streaming.</p></li>
<li><p>Click on the <code class="code docutils literal notranslate"><span class="pre">SendMatOverSocket</span></code> node, and choose the connection created previously from the drop-down menu</p></li>
<li><p>Start the workflow to initiate the data stream.</p></li>
</ol>
<p>The workflow should look something like the one pictured below (<code class="code docutils literal notranslate"><span class="pre">.bonsai</span></code> file available in the <a class="reference external" href="https://github.com/open-ephys-plugins/ephys-socket/tree/main/Resources">Ephys Socket GitHub repo</a>):</p>
<img alt="A compatible Bonsai workflow using hardware" src="../../_images/ephyssocket-02.png" />
<p>A second workflow is included in the same <a class="reference external" href="https://github.com/open-ephys-plugins/ephys-socket/tree/main/Resources">Resources folder</a> which uses a function generator (imported from <strong>Bonsai.Dsp</strong>). This workflow is useful for testing socket connections without requiring hardware to be connected:</p>
<img alt="A compatible Bonsai workflow using a function generator" src="../../_images/ephyssocket-03.png" />
</section>
<section id="in-open-ephys">
<h3>In Open Ephys<a class="headerlink" href="#in-open-ephys" title="Permalink to this heading">#</a></h3>
<ol class="arabic simple">
<li><p>Drag and drop the Ephys Socket plugin onto the signal chain.</p></li>
<li><p>Add downstream filters or sinks (i.e., <code class="code docutils literal notranslate"><span class="pre">LFP</span> <span class="pre">Viewer</span></code>, <code class="code docutils literal notranslate"><span class="pre">Record</span> <span class="pre">Node</span></code>, etc.).</p></li>
<li><p>Ensure the <strong>port</strong> matches the same number used in Bonsai.</p></li>
<li><p>Ensure the <strong>frequency</strong> parameter matches the sample rate of the Bonsai data stream. By default the Open Ephys acquisition board acquires data at 30000 Hz.</p></li>
<li><p>Change the <strong>offset</strong> and <strong>scale</strong> values as needed, but it is important to know that the Open Ephys GUI works in microvolts represented as floating points. These values may be required to transform your data into microvolts; for example, the Open Ephys Acquisition Board requires a scale of 0.195 and an offset of 32768 to correctly convert data from <cite>uint16</cite> to <cite>float</cite> values.</p>
<ul class="simple">
<li><p>If values are sent as microvolts, then <strong>scale</strong> and <strong>offset</strong> can be set to 1 and 0, respectively. Note that this will require more bandwidth.</p></li>
</ul>
</li>
<li><p>Click the “Connect” button to establish the connection with Bonsai. If it’s not connecting, make sure the Bonsai workflow is running, and the <strong>port</strong> numbers match. Once the connection is made, all input parameters will be grayed out, and cannot be changed until the socket is disconnected.</p>
<ul class="simple">
<li><p>If no data is being sent from Bonsai yet (e.g., the acquisition board is still initializing), the socket will not connect. Wait until the hardware is actively sending data before attempting to connect the socket.</p></li>
</ul>
</li>
<li><p>Start acquisition in Open Ephys. If all is working, you should see the data stream in the LFP Viewer.</p></li>
<li><p>If the header format is changed in any way, such as by modifying the number of channels or changing the data type, the Open Ephys GUI will automatically detect these changes and stop acquiring data.</p>
<ul class="simple">
<li><p>If the GUI was not actively acquiring data, it is necessary to disconnect the socket and connect again to read the updated header values.</p></li>
<li><p>Note that attempting to start acquisition after changing these values will automatically disconnect the socket anyway, forcing a new connection to be made.</p></li>
</ul>
</li>
</ol>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>This plugin does not guarantee that samples will not be lost in transit, so it’s essential to save your data stream on the Bonsai end. There are at least two ways data loss can occur: 1) When a data stream is first connected, there is no guarantee that the data will be saved, since data is not acquired immediately after connecting the socket. 2) If too much data is being sent and the Open Ephys GUI cannot process the data quickly enough, some packets may be lost due to the TCP buffer filling up. If you suspect samples are being dropped (e.g., if the LFP Viewer is not updating at the expected speed), sending a lower bandwidth might fix the problem.</p>
</div>
</section>
</section>
<section id="header-format-for-custom-data-streams">
<h2>Header Format for Custom Data Streams<a class="headerlink" href="#header-format-for-custom-data-streams" title="Permalink to this heading">#</a></h2>
<p>While the <code class="code docutils literal notranslate"><span class="pre">SendMatOverSocket</span></code> node (found in <strong>OpenEphys.Sockets.Bonsai</strong>, see <a class="reference internal" href="#in-bonsai"><span class="std std-ref">In Bonsai</span></a> for details) is a common use case for sending <cite>OpenCV.Net.Mat</cite> data over the TCP socket, it is not the only way to stream data. As long as whatever is used to stream data (e.g., a Python script that sends data over the TCP socket) correctly prepends a header to the data stream, Ephys Socket can correctly interpret the data.</p>
<p>An example Python script is included in the <a class="reference external" href="https://github.com/open-ephys-plugins/ephys-socket/tree/main/Resources">Resources</a> folder of the plugin repository, which implements the format described here. Each variable is 4 bytes long (with the exception of the Bit Depth, which is 2 bytes long), and must be sent in the order listed below. The total header length is 22 bytes.</p>
<table class="table" id="id2">
<caption><span class="caption-text">Ephys Socket header variables</span><a class="headerlink" href="#id2" title="Permalink to this table">#</a></caption>
<colgroup>
<col style="width: 20%" />
<col style="width: 11%" />
<col style="width: 68%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p><strong>Variable</strong></p></td>
<td><p><strong>Data Type</strong></p></td>
<td><p><strong>Description</strong></p></td>
</tr>
<tr class="row-even"><td><p>Offset</p></td>
<td><p><cite>int32</cite></p></td>
<td><p>Integer defining the offset in the data stream. For TCP sockets, value must always be set to <strong>0</strong>.</p></td>
</tr>
<tr class="row-odd"><td><p>Number of Bytes</p></td>
<td><p><cite>int32</cite></p></td>
<td><p>Total number of bytes sent in each packet. Calculated as <code class="code docutils literal notranslate"><span class="pre">num_bytes</span> <span class="pre">=</span> <span class="pre">num_channels</span> <span class="pre">*</span> <span class="pre">num_samples</span> <span class="pre">*</span> <span class="pre">element_size</span></code>. This does <strong>not</strong> include the header bytes.</p></td>
</tr>
<tr class="row-even"><td><p>Bit Depth</p></td>
<td><p>int16</p></td>
<td><p>Depth defines the OpenCV.Mat <a class="reference external" href="https://github.com/horizongir/opencv.net/blob/main/src/OpenCV.Net/CoreTypes.cs#L93">Depth</a>, an enumeration defined as <code class="code docutils literal notranslate"><span class="pre">[U8,</span> <span class="pre">S8,</span> <span class="pre">U16,</span> <span class="pre">S16,</span> <span class="pre">S32,</span> <span class="pre">F32,</span> <span class="pre">F64]</span></code>, where U is ‘unsigned’, S is ‘signed’, F is ‘float’, and the number indicates the number of bits. For example, <code class="code docutils literal notranslate"><span class="pre">U16</span></code> means ‘unsigned integer with 16 bits’. Note that the enumeration is zero-indexed, where <code class="code docutils literal notranslate"><span class="pre">U8</span> <span class="pre">=</span> <span class="pre">0</span></code>, and <code class="code docutils literal notranslate"><span class="pre">F64</span> <span class="pre">=</span> <span class="pre">6</span></code></p></td>
</tr>
<tr class="row-odd"><td><p>Element Size</p></td>
<td><p><cite>int32</cite></p></td>
<td><p>Number of bytes needed for each sample. For <code class="code docutils literal notranslate"><span class="pre">U16</span></code>, <code class="code docutils literal notranslate"><span class="pre">element_size</span> <span class="pre">=</span> <span class="pre">2</span></code>, while for <code class="code docutils literal notranslate"><span class="pre">F64</span></code>, <code class="code docutils literal notranslate"><span class="pre">element_size</span> <span class="pre">=</span> <span class="pre">8</span></code>.</p></td>
</tr>
<tr class="row-even"><td><p>Number of Channels</p></td>
<td><p><cite>int32</cite></p></td>
<td><p>Number of channels per packet.</p></td>
</tr>
<tr class="row-odd"><td><p>Number of Samples</p></td>
<td><p><cite>int32</cite></p></td>
<td><p>Number of samples sent per channel per packet.</p></td>
</tr>
</tbody>
</table>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Pay attention to the order of data samples in the example script. Samples are not interleaved, but rather in each packet the samples for channel 1 are sent, followed by the samples for channel 2, and so on.</p>
</div>
</section>
</section>


                </article>
              
              
              
                <footer class="bd-footer-article">
                  
<div class="footer-article-items footer-article__inner">
  
    <div class="footer-article-item"><!-- Previous / next buttons -->
<div class="prev-next-area">
    <a class="left-prev"
       href="Data-Snapshot.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title">Data Snapshot</p>
      </div>
    </a>
    <a class="right-next"
       href="Event-Broadcaster.html"
       title="next page">
      <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">Event Broadcaster</p>
      </div>
      <i class="fa-solid fa-angle-right"></i>
    </a>
</div></div>
  
</div>

                </footer>
              
            </div>
            
            
              
                <div class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">

  <div class="sidebar-secondary-item">
  <div class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> On this page
  </div>
  <nav class="bd-toc-nav page-toc">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#installing-and-upgrading">Installing and upgrading</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#plugin-configuration">Plugin Configuration</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#in-bonsai">In Bonsai</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#in-open-ephys">In Open Ephys</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#header-format-for-custom-data-streams">Header Format for Custom Data Streams</a></li>
</ul>
  </nav></div>

  <div class="sidebar-secondary-item">
  
  <div class="tocsection editthispage">
    <a href="https://github.com/open-ephys/gui-docs/edit/main/source/User-Manual/Plugins/Ephys-Socket.rst">
      <i class="fa-solid fa-pencil"></i>
      
      
        
          Edit on GitHub
        
      
    </a>
  </div>
</div>

  <div class="sidebar-secondary-item">
  <div class="tocsection sourcelink">
    <a href="../../_sources/User-Manual/Plugins/Ephys-Socket.rst.txt">
      <i class="fa-solid fa-file-lines"></i> Show Source
    </a>
  </div>
</div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
          </footer>
        
      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../../_static/scripts/bootstrap.js?digest=e353d410970836974a52"></script>
<script src="../../_static/scripts/pydata-sphinx-theme.js?digest=e353d410970836974a52"></script>

  <footer class="bd-footer">
<div class="bd-footer__inner bd-page-width">
  
    <div class="footer-items__start">
      
        <div class="footer-item">
  <p class="copyright">
    
      © Copyright 2010-2024, Open Ephys &amp; Contributors.
      <br/>
    
  </p>
</div>
      
    </div>
  
  
    <div class="footer-items__end">
      
        <div class="footer-item"><p class="theme-version">
  Built with the <a href="https://pydata-sphinx-theme.readthedocs.io/en/stable/index.html">PyData Sphinx Theme</a> 0.13.3.
</p></div>
      
    </div>
  
</div>

  </footer>
  </body>
</html>